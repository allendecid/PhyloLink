PhyloDisplay=function(a,b,c,d,e){function v(){var a=d3.select("#hiddin");"hidden"==a.style("visibility")?a.style("visibility",""):a.style("visibility","hidden")}function w(){var a=d3.select("#hiddin1");"hidden"==a.style("visibility")?a.style("visibility",""):a.style("visibility","hidden")}function z(){function l(){d3.text("file://"+c,function(a){var b=require("fasta-parser"),c=a,d={},e=b(),h=0;e.on("data",function(a){d[h]=JSON.parse(a.toString()),h++}),e.write(c),e.end();var i=Object.keys(d).length,j=[],l=g.length;for(console.log(g.length),f=0;l>f;f++)for(k=0;i>k;k++)d[k].id===g[f]&&(j[f]=">"+d[k].id+"\n"+d[k].seq+"\n");var m=new Blob(j,{type:"text/plain;charset=utf-8"});saveAs(m,"sequence.txt")})}function v(){d3.text("file://"+c,function(a){var b=require("fasta-parser"),c=a,d={},e=b(),h=0;e.on("data",function(a){d[h]=JSON.parse(a.toString()),h++}),e.write(c),e.end();var i=d[0].seq.length,j=Object.keys(d).length,l=[],n={},o=g.length;for(f=0;o>f;f++)for(k=0;j>k;k++)if(d[k].id===g[f]){for(m=0;i>m;m++)n[m]=d[k].seq.charAt(m);l[f]=JSON.stringify(n)}for(f=0;o>f;f++)l[f]=jQuery.parseJSON(l[f]);d3.scale.category10();var r=[];for(f=0;o>f;f++)r[f]=$.map(l[f],function(a){return a});r.forEach(function(a,b){a.unshift(g[b])});var s=d3.select("#alinea").append("table").append("tbody").selectAll("tr").data(r,function(a,b){return b>0?a:void 0}).enter().append("tr");s.selectAll("td").data(function(a){return a}).enter().append("td").style("background-color",function(a){return"A"===a?"red":"T"===a?"blue":"C"===a?"green":"G"===a?"yellow":"white"}).text(function(a){return a});var u=$(document).width();$(document).height(),d3.scale.ordinal().rangeRoundBands([0,u],.1)})}d3.csv("file://"+b,function(b,c){function z(){d3.text("file://"+a,function(a){function F(a,b,c){return a.replace(new RegExp(G(b),"g"),c)}function G(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function H(a){a.isSelected?d3.select(this).style("fill","lightsteelblue").attr("r","3.5"):d3.select(this).style("fill",function(a){return c(a.group)}).attr("r","5.5")}function I(a){a.isSelected?d3.select(this).style("fill","#fff").attr("r","2.5"):d3.select(this).style("fill","#F94D00").attr("r","5.5")}function J(a,b){var c=function(a,b){if(b(a),a.children)for(var d=a.children.length-1;d>=0;d--)c(a.children[d],b)};c(a[0],function(a){a.rootDist=(a.parent?a.parent.rootDist:0)+(a.branchlength||0)});var d=a.map(function(a){return a.rootDist}),e=d3.scale.linear().domain([0,d3.max(d)]).range([0,b]);return c(a[0],function(a){a.y=e(a.rootDist)}),e}function K(a){function g(a,b,c,d){0===c?a.children?(a.code="papa",a.children.forEach(function(c){c.branchlength>=f?c.children?(c.group=c.id,g(c,b+1,1,c.group)):(c.group=e,e-=1,t+=1,u+=a.branchlength):c.branchlength<f&&(c.group=0,g(c,b+1,0,c.group))})):(t+=1,u+=a.branchlength):1===c&&(a.children?(a.code="papa",a.children.forEach(function(c){c.branchlength>=f?c.children?(c.group=c.id,g(c,b+1,1,c.group)):(c.group=e,e-=1,t+=1,u+=a.branchlength):c.branchlength<f&&(c.group=d,g(c,b+1,1,c.group))})):(t+=1,u+=a.branchlength))}var e=-1,f=d;return g(a,1,0,0),a}function L(a){function f(a,b,c,d){0===c?a.children?(a.code="papa",a.children.forEach(function(c){c.children?c.branchlength>=e?(c.group=c.id,f(c,b+1,1,c.group)):c.branchlength<e&&(c.group=d,f(c,b+1,0,c.group)):(c.group=d,t+=1,u+=a.branchlength)})):(t+=1,u+=a.branchlength):1===c&&(a.children?(a.code="papa",a.children.forEach(function(c){c.children?c.branchlength>=e?(c.group=c.id,f(c,b+1,1,c.group)):c.branchlength<e&&(c.group=d,f(c,b+1,1,c.group)):(c.group=d,t+=1,u+=a.branchlength)})):(t+=1,u+=a.branchlength))}var e=d;return f(a,1,0,0),a}function M(){var a={w:75,h:30,s:3,r:3},b=d3.select("#legend").append("svg:svg").attr("width",a.w).attr("height",d3.keys(k).length*(a.h+a.s)),c=b.selectAll("g").data(d3.entries(k)).enter().append("svg:g").attr("transform",function(b,c){return"translate(0,"+c*(a.h+a.s)+")"});c.append("svg:rect").attr("rx",a.r).attr("ry",a.r).attr("width",a.w).attr("height",a.h).style("fill",function(a){return a.value}),c.append("svg:text").attr("x",a.w/2).attr("y",a.h/2).attr("dy","0.35em").attr("font-size","9").attr("font-family","sans-serif").attr("fill","#fff").attr("text-anchor","middle").text(function(a){return a.key}).on("click",function(){window.location.reload(!0)})}function N(){var a=100,b=100,c=b/2;d3.scale.category20c();var e=[{label:n[1],value:l,color:"#90c843"},{label:n[2],value:m,color:"#A80000"},{label:n[3],value:v,color:"#555555"},{label:"Rest",value:t-(l+m+v),color:"steelblue"}],f=d3.select("#chart").append("svg:svg").data([e]).attr("width",a).attr("height",b).append("svg:g").attr("transform","translate("+c+","+c+")"),g=d3.layout.pie().value(function(a){return a.value}),h=d3.svg.arc().outerRadius(c),i=f.selectAll("g.slice").data(g).enter().append("svg:g").attr("class","slice");i.append("svg:path").attr("fill",function(a,b){return e[b].color}).attr("d",function(a){return h(a)}),i.append("svg:text").attr("transform",function(a){return a.innerRadius=0,a.outerRadius=c,"translate("+h.centroid(a)+")"}).attr("text-anchor","middle").text(function(a,b){return 0!==e[b].value?e[b].value:void 0}),i.append("svg:text").attr("dy",function(){return-40}).style("fill","#000").attr("text-anchor","middle").text(function(a,b){return 0!==e[b].value?"Totals":void 0})}function O(){var a=100,b=100,c=b/2;d3.scale.category20c();var e=[{label:n[1],value:l-w,color:"#90c843"},{label:n[2],value:m-w,color:"#A80000"},{label:n[3],value:v-w,color:"#555555"},{label:"Intercept",value:w,color:"blue"}],f=d3.select("#chart1").append("svg:svg").data([e]).attr("width",a).attr("height",b).append("svg:g").attr("transform","translate("+c+","+c+")"),g=d3.layout.pie().value(function(a){return a.value}),h=d3.svg.arc().outerRadius(c),i=f.selectAll("g.slice").data(g).enter().append("svg:g").attr("class","slice");i.append("svg:path").attr("fill",function(a,b){return e[b].color}).attr("d",function(a){return h(a)}),i.append("svg:text").attr("transform",function(a){return a.innerRadius=0,a.outerRadius=c,"translate("+h.centroid(a)+")"}).attr("text-anchor","middle").text(function(a,b){return 0!==e[b].value?e[b].value:void 0}),i.append("svg:text").attr("dy",function(){return-40}).style("fill","#000").attr("text-anchor","middle").text(function(a,b){return 0!==e[b].value?"Intercept":void 0})}var b=d3.scale.category20(),c=d3.scale.category20();if(1===j&&(k={"":"Transparent"},k[n[j]]="#90c843"),2===j&&(1===p&&(k={"":"Transparent"},k[n[j-1]]="#90c843",k[n[j]]="#A80000",p=0),k[n[j]]={},k[n[j]]="#A80000"),3===j&&(1===p&&(k={"":"Transparent"},k[n[j-2]]="#90c843",k[n[j-1]]="#A80000",k[n[j]]="#555555",p=0),k[n[j]]={},k[n[j]]="#555555"),0!==q)for(k={"":"Transparent"},Q=0;Q<r.length;Q++)k[r[Q]]=b(r[Q]);if(d3.select("#legend").selectAll("svg").remove(),M(),null===o){var f=a,i=F(f," ",""),A=nwk.parser.parse(i),B=nwk.converter.toBinary(A),C=nwk.converter.toJSON(B),D=F(C,',"children":[]',""),E=JSON.parse(D);t=0,E="1"===e?L(E):K(E)}else E=o,o=null;Phylodiag=function(){function c(c){var e=c.source,f=c.target,i=((e.x+f.x)/2,(e.y+f.y)/2,[e,{x:f.x,y:e.y},f]);return i=i.map(a),b(i)}var a=function(a){return[a.y,a.x]},b=function(a){return"M"+a[0]+" "+a[1]+" "+a[2]};return c.projection=function(b){return arguments.length?(a=b,c):a},c.path=function(a){return arguments.length?(b=a,c):b},c},PhyloAngle=function(a,b){var c=2*Math.PI,d=c/4,e=a[0]>=0?a[1]>=0?1:2:a[1]>=0?4:3,f=Math.abs(Math.asin(a[1]/b));switch(e){case 1:coordAngle=d-f;break;case 2:coordAngle=d+f;break;case 3:coordAngle=2*d+d-f;break;case 4:coordAngle=3*d+f}return coordAngle},PhyloNodes=function(a){a.selectAll("g.leaf.node").append("svg:circle").attr("r","3.5").attr("fill","lightsteelblue").attr("stroke",function(a){return c(a.group)}).attr("stroke-width","2px").attr("fill",function(a){return c(a.group)}).on("click",H),a.selectAll("g.inner.node").append("svg:circle").attr("r","2.5").attr("fill","#fff").attr("stroke","steelblue").attr("stroke-width","2px").on("click",I),a.selectAll("g.root.node").append("svg:circle").attr("r",4.5).attr("fill","steelblue").attr("stroke","#369").attr("stroke-width","2px")},phylodraw=function(a){function u(){r.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")"),r.selectAll("rect").attr("width",3.5/k.scale()).attr("height",7/k.scale()),r.selectAll("ellipse").attr("rx",2/k.scale()).attr("ry",4/k.scale()),r.selectAll("line").attr("y1",-3/k.scale()).attr("y2",3/k.scale()).attr("stroke-width",5/k.scale()),r.selectAll("path.link").attr("stroke-width",2/k.scale())}function D(a){a.children?a.children.forEach(D):(g[h]=a.name,h++)}function E(a){if(a.children)a.children.forEach(E);else{var b=g.indexOf(a.name);g.splice(b,1),h--}}function F(a,b){function e(a,b){if(a.children)a.children.forEach(function(a){e(a,b)});else for(Q=1;j+1>Q;Q++)b[Q].test(s[a.name])&&(c[Q-1]=c[Q-1]+1)}var c=[],d="";for(Q=1;j+1>Q;Q++)c[Q-1]=0;for(e(a,b),Q=1;j+1>Q;Q++)d+=n[Q]+" : "+c[Q-1]+"<br/>";return d}var d=$(window).height();11*t>$(window).height()&&(d=11*t);var e=$(window).width(),f=d,i=d3.layout.cluster().size([f,e]).sort(function(a){return a.children?a.children.length:-1}).children(function(a){return a.children}),a=i(a);a.forEach(function(a){if(!a.children&&(s[a.name]="",!a._children))for(Q=1;Q<x.length;Q++)"undefined"!=typeof y[a.name][Q]&&(s[a.name]+=x[Q]+" : "+y[a.name][Q]+"<br/>")});var k=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",u),p=Phylodiag(),r=d3.select("#tree-container").append("svg:svg").attr("width",e+300).attr("height",$(document).height()+50).attr("class","overlay").call(k).append("svg:g").attr("transform","translate(20, 20)");J(a,e),r.selectAll("path.link").data(i.links(a)).enter().append("svg:path").attr("class","link").attr("d",p).attr("fill","none").attr("stroke",function(a){return c(a.target.group)}).attr("stroke-width","2px");var C=r.selectAll("g.node").data(a).enter().append("svg:g").attr("class",function(a){return a.children?0==a.depth?"root node":"inner node":"leaf node"}).attr("transform",function(a){return"translate("+a.y+","+a.x+")"}).on("click",function(a){a.isSelected?a.children?a.children&&E(a):(g.splice(a.isSelected,1),h--,console.log(g.length),delete a.isSelected):(a.isSelected=h,a.children?a.children&&(o=a,D(a)):(g[h]=a.name,h++))}).on("mouseover",function(a){if(a.children){if(a.children&&0!==j){var b=[];for(Q=1;j+1>Q;Q++)b[Q]=new RegExp(n[Q]),console.log(n[Q]);var c=F(a,b);G.transition().duration(200).style("opacity",.9),G.html(c).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}}else G.transition().duration(200).style("opacity",.9),G.html(s[a.name]).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(){G.transition().duration(500).style("opacity",0)});C.append("rect").attr("class","nodeRect").attr("x",-10).attr("y",-3.5).attr("width",3).attr("height",7).style("fill",function(a){if(0!==q&&!a.children)return"undefined"!=typeof y[a.name][q]?b(y[a.name][q]):"transparent";if(0===j||a.children)return"transparent";for(Q=1;Q<x.length;Q++)if("undefined"!=typeof y[a.name][Q]&&y[a.name][Q]===n[1])return l+=1,"#90c843"}),C.append("ellipse").attr("class","nodeEllipse").attr("cx",-15).attr("cy",0).attr("rx",2).attr("ry",4).style("fill",function(a){if(2!==j&&3!==j||a.children)return"transparent";for(Q=1;Q<x.length;Q++)if("undefined"!=typeof y[a.name][Q]&&y[a.name][Q]===n[2])return m+=1,"undefined"!=typeof y[a.name][Q]&&y[a.name][Q]===n[1]&&(w+=1),"#A80000"}),C.append("line").attr("x1",-23).attr("y1",-3).attr("x2",-20).attr("y2",3).attr("stroke-width",2).style("stroke",function(a){if(3!==j||a.children)return"transparent";for(Q=1;Q<x.length;Q++)if("undefined"!=typeof y[a.name][Q]&&y[a.name][Q]===n[3])return v+=1,"undefined"!=typeof y[a.name][Q]&&y[a.name][Q]===n[2]&&"undefined"!=typeof y[a.name][Q]&&y[a.name][Q]===n[1]&&(w+=1),"#555555"});var G=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);return PhyloNodes(r),r.selectAll("g.inner.node").append("svg:text").attr("dx",-6).attr("dy",-6).attr("text-anchor","end").attr("font-size","5").attr("fill","#606060 ").text(function(a){return a.name}),r.selectAll("g.leaf.node").append("svg:text").attr("dx",8).attr("dy",3).attr("text-anchor","start").attr("font-size","7").attr("fill",function(a){return c(a.group)}).text(function(a){return a.name}),{tree:i,vis:r}},phylodraw(E);var f={};f.d=[{FirstName:"Sequences",Age:t},{FirstName:"Avg Distance",Age:(u/t).toFixed(4)},{FirstName:"Total Distance",Age:u.toFixed(4)}],$("#thetable tr").not(":first").not(":last").remove();for(var P="",Q=0;Q<f.d.length;Q++)P+="<tr><td>"+f.d[Q].FirstName+"</td><td>"+f.d[Q].Age+"</td></tr>";$("#thetable tr").first().after(P),0!==j&&(d3.select("#chart").selectAll("svg").remove(),d3.select("#chart1").selectAll("svg").remove(),N(),O()),$(".qtymake").click(function(){d3.select("#tree-container").selectAll("svg").remove(),z()}),$(".qtyunmake").click(function(){d3.select("#tree-container").selectAll("svg").remove(),g=[],h=0,j=0,q=0,n=[],o=null,k={"":"Transparent"},l=0,m=0,v=0,t=0,w=0,u=0,d3.select("#chart").selectAll("svg").remove(),d3.select("#chart1").selectAll("svg").remove(),z()})})}function A(){d3.text("file://"+a,function(a){function z(a,b,c){return a.replace(new RegExp(A(b),"g"),c)}function A(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function B(a,b){var c=function(a,b){if(b(a),a.children)for(var d=a.children.length-1;d>=0;d--)c(a.children[d],b)};c(a[0],function(a){a.rootDist=(a.parent?a.parent.rootDist:0)+(a.branchlength||0)});var d=a.map(function(a){return a.rootDist}),e=d3.scale.linear().domain([0,d3.max(d)]).range([0,b]);return c(a[0],function(a){a.y=e(a.rootDist)}),e}function C(){var a={w:75,h:30,s:3,r:3},b=d3.select("#legend").append("svg:svg").attr("width",a.w).attr("height",d3.keys(k).length*(a.h+a.s)),c=b.selectAll("g").data(d3.entries(k)).enter().append("svg:g").attr("transform",function(b,c){return"translate(0,"+c*(a.h+a.s)+")"});c.append("svg:rect").attr("rx",a.r).attr("ry",a.r).attr("width",a.w).attr("height",a.h).style("fill",function(a){return a.value}),c.append("svg:text").attr("x",a.w/2).attr("y",a.h/2).attr("dy","0.35em").attr("font-size","9").attr("font-family","sans-serif").attr("fill","#fff").attr("text-anchor","middle").text(function(a){return a.key}).on("click",function(){window.location.reload(!0)})}var b=d3.scale.category20(),c=a,d=z(c," ",""),e=nwk.parser.parse(d),f=nwk.converter.toBinary(e),g=nwk.converter.toJSON(f),h=z(g,',"children":[]',""),o=JSON.parse(h);if(1===j&&(k={"":"Transparent"},k[n[j]]="#90c843"),2===j&&(1===p&&(k={"":"Transparent"},k[n[j-1]]="#90c843",k[n[j]]="#A80000",p=0),k[n[j]]={},k[n[j]]="#A80000"),3===j&&(1===p&&(k={"":"Transparent"},k[n[j-2]]="#90c843",k[n[j-1]]="#A80000",k[n[j]]="#555555",p=0),k[n[j]]={},k[n[j]]="#555555"),0!==q)for(k={"":"Transparent"},i=0;i<r.length;i++)k[r[i]]=b(r[i]);d3.select("#legend").selectAll("svg").remove(),C(),u=0,Phylodiag=function(){function c(c){var e=c.source,f=c.target,i=((e.x+f.x)/2,(e.y+f.y)/2,[e,{x:f.x,y:e.y},f]);return i=i.map(a),b(i)}var a=function(a){return[a.y,a.x]},b=function(a){return"M"+a[0]+" "+a[1]+" "+a[2]};return c.projection=function(b){return arguments.length?(a=b,c):a},c.path=function(a){return arguments.length?(b=a,c):b},c},PhyloAngle=function(a,b){var c=2*Math.PI,d=c/4,e=a[0]>=0?a[1]>=0?1:2:a[1]>=0?4:3,f=Math.abs(Math.asin(a[1]/b));switch(e){case 1:coordAngle=d-f;break;case 2:coordAngle=d+f;break;case 3:coordAngle=2*d+d-f;break;case 4:coordAngle=3*d+f}return coordAngle},PhyloNodes=function(a){a.selectAll("g.leaf.node").append("svg:circle"),a.selectAll("g.root.node").append("svg:circle").attr("r",4.5).attr("fill","steelblue").attr("stroke","#369").attr("stroke-width","2px")},phylodraw=function(a){function o(){k.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")"),k.selectAll("rect").attr("width",5/g.scale()).attr("height",5/g.scale()),k.selectAll("ellipse").attr("rx",2/g.scale()).attr("ry",4/g.scale()),k.selectAll("line").attr("y1",-3/g.scale()).attr("y2",3/g.scale()).attr("stroke-width",5/g.scale()),k.selectAll("path.link").attr("stroke-width",2/g.scale())}var c=$(document).height();8*t>$(document).height()&&(c=8*t);var d=$(document).width(),e=c,f=d3.layout.cluster().size([e,d]).sort(function(a){return a.children?a.children.length:-1}).children(function(a){return a.children}),g=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",o),h=Phylodiag(),k=d3.select("#tree-container").append("svg:svg").attr("width",d+300).attr("height",$(document).height()+50).attr("class","overlay").call(g).append("svg:g").attr("transform","translate(20, 20)"),a=f(a);B(a,d),k.selectAll("path.link").data(f.links(a)).enter().append("svg:path").attr("class","link").attr("d",h).attr("fill","none").attr("stroke","#ccc").attr("stroke-width","2px");var z=k.selectAll("g.node").data(a).enter().append("svg:g").attr("class",function(a){return a.children?0==a.depth?"root node":"inner node":"leaf node"}).attr("transform",function(a){return"translate("+a.y+","+a.x+")"}).on("mouseover",function(a){a.children||(A.transition().duration(200).style("opacity",.9),A.html(s[a.name]).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px"))}).on("mouseout",function(){A.transition().duration(500).style("opacity",0)});z.append("rect").attr("class","nodeRect").attr("x",-10).attr("y",-3.5).attr("width",3).attr("height",7).style("fill",function(a){if(0!==q&&!a.children)return"undefined"!=typeof y[a.name][q]?b(y[a.name][q]):"transparent";if(0===j||a.children)return"transparent";for(i=1;i<x.length;i++)if("undefined"!=typeof y[a.name][i]&&y[a.name][i]===n[1])return l+=1,"#90c843"}),z.append("ellipse").attr("class","nodeEllipse").attr("cx",-15).attr("cy",0).attr("rx",2).attr("ry",4).style("fill",function(a){if(2!==j&&3!==j||a.children)return"transparent";for(i=1;i<x.length;i++)if("undefined"!=typeof y[a.name][i]&&y[a.name][i]===n[2])return m+=1,"undefined"!=typeof y[a.name][i]&&y[a.name][i]===n[1]&&(w+=1),"#A80000"}),z.append("line").attr("x1",-23).attr("y1",-3).attr("x2",-20).attr("y2",3).attr("stroke-width",2).style("stroke",function(a){if(3!==j||a.children)return"transparent";for(i=1;i<x.length;i++)if("undefined"!=typeof y[a.name][i]&&y[a.name][i]===n[3])return v+=1,"undefined"!=typeof y[a.name][i]&&y[a.name][i]===n[2]&&"undefined"!=typeof y[a.name][i]&&y[a.name][i]===n[1]&&(w+=1),"#555555"});var A=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);return PhyloNodes(k),k.selectAll("g.inner.node").append("svg:text").attr("dx",-6).attr("dy",-6).attr("text-anchor","end").attr("font-size","5").attr("fill","#606060 ").text(function(a){return a.name}),k.selectAll("g.leaf.node").append("svg:text").attr("dx",8).attr("dy",3).attr("text-anchor","start").attr("font-size","7").attr("fill","#383838").text(function(a){return a.name}),{tree:f,vis:k}},phylodraw(o)})}function B(a,b){var c=d3.select("#tabla").append("table").attr("id","hor-minimalist-b"),d=c.append("thead"),e=c.append("tbody");d.append("tr").selectAll("th").data(b).enter().append("th").append("h3").text(function(a){return a});var f=e.selectAll("tr").data(a).enter().append("tr");return f.selectAll("td").data(function(a){return b.map(function(b){return{column:b,value:a[b]}})}).enter().append("td").html(function(a){return a.value}).on("click",function(a){q=0,l=0,m=0,v=0,t=0,w=0,u=0,d3.select("#tree-container").selectAll("svg").remove(),3===j?(j=1,n=[],z(),n[j]=a.value,k={"":"Transparent"}):(z(),j++,n[j]=a.value)}),c}function C(){var a=d3.select("#tabla");"hidden"===a.style("visibility")?(a.style("visibility",""),B(c,x)):(d3.select("#tabla").selectAll("tr").remove(),a.style("visibility","hidden"))}c.forEach(function(a){for(y[a[x[0]]]=[],i=1;i<x.length;i++)"undefined"!=typeof x[i]&&(y[a[x[0]]][i]=a[x[i]]);a.close=+a.close});var k={"":"Transparent"},l=0,m=0,v=0;t=0,u=0;var w=0;d3.selectAll("input").on("change",function(){var a=this.value;"Phyloviz"===a?(d3.select("#tree-container").selectAll("svg").remove(),z()):"Dendogram"===a&&(d3.select("#tree-container").selectAll("svg").remove(),A())}),z(),d3.select("#openert").on("click",C),$(document).ready(function(){$("#btnSubmit").click(function(){var a=$("#frm1 :input");n=[],j=0,p=1,a.each(function(){$(this).val()&&"Search"!==$(this).val()&&(j++,n[j]=$(this).val(),console.log(j),console.log($(this).val()))}),q=0,l=0,m=0,v=0,t=0,w=0,u=0,d3.select("#tree-container").selectAll("svg").remove(),z()}),$("#classes").on("change",function(){var a=this.value;for(i=0;i<x.length;i++)a===x[i]&&(q=i,r=d3.map(c,function(b){return b[a]}).keys());n=[],j=0,p=1,k={"":"Transparent"},d3.select("#tree-container").selectAll("svg").remove(),l=0,m=0,v=0,t=0,w=0,u=0,d3.select("#chart").selectAll("svg").remove(),d3.select("#chart1").selectAll("svg").remove(),z()})})}),$("#dialog").dialog({autoOpen:!1,resizable:!0,show:"slide",modal:!0,buttons:{"Save as Fasta":function(){l()},Visualize:function(){v()}}}),$("#opener").click(function(){d3.select("#dialog").selectAll("td").remove(),$("#dialog").dialog("open"),$("#dialog").dialog("option","position",{my:"left center",at:"left center"})})}function A(){var a=document.createElement("script");a.setAttribute("src","js/svg-crowbar.js"),a.setAttribute("class","svg-crowbar"),document.body.appendChild(a)}function B(){var f="treeclus.html?";f=f+"tree="+a+"&"+"corte="+d+"&"+"csv="+b+"&"+"fsa="+c+"&"+"virus="+e,$(location).attr("href",f),window.location=f}var l,r,t,g=[],h=0,j=0,n=[],o=null,p=0,q=0,s=[],u=0;d3.select("#toggler").on("click",v),d3.csv("file://"+b,function(a){l=Object.keys(a[0]),select=document.getElementById("countries"),select1=document.getElementById("countries1"),select2=document.getElementById("countries2"),select3=document.getElementById("countries3"),select4=document.getElementById("countries4"),select5=document.getElementById("countries5"),select6=document.getElementById("countries6"),select7=document.getElementById("countries7"),select8=document.getElementById("countries8"),select9=document.getElementById("classes");for(key in l)select.add(new Option(l[key])),select1.add(new Option(l[key])),select2.add(new Option(l[key])),select3.add(new Option(l[key])),select4.add(new Option(l[key])),select5.add(new Option(l[key])),select6.add(new Option(l[key])),select7.add(new Option(l[key])),select8.add(new Option(l[key])),select9.add(new Option(l[key]));w()});var x=[];$(document).ready(function(){$("#btnSubmit1").click(function(){var a=$("#frm2 select");ci=0,a.each(function(){$(this).val()&&"Start"!==$(this).val()&&"3"!==$(this).val()&&(x[ci]=$(this).val(),ci++)}),z(),w()})});var y={};d3.select("#saveimage").on("click",A),d3.select("#clusterbu").on("click",B)};
